machine:
  kubelet:
    nodeIP:
      validSubnets:
      %{ for subnet in subnets ~}
      - ${subnet}
      %{ endfor ~}

  network:
    extraHostEntries:
      - ip: ${controlplane_internal_ip}
        aliases:
          - ${controlplane_endpoint_internal}

cluster:
  apiServer:
    certSANs:
      %{ for SAN in certSANs ~}
      - ${SAN}
      %{ endfor ~}

  network:
    cni:
        name: none
  proxy:
    disabled: true

  inlineManifests:
    - name: runtimeclass-gvisor
      contents: |-
        apiVersion: node.k8s.io/v1
        kind: RuntimeClass
        metadata:
          name: gvisor
        handler: runsc
    - name: runtimeclass-runc
      contents: |-
        apiVersion: node.k8s.io/v1
        kind: RuntimeClass
        metadata:
          name: runc
        handler: runc
